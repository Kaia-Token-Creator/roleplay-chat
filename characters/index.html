<!doctype html>
<html lang="en">
<head>

  <meta name='impact-site-verification' value='f343b3c2-5405-4f62-a4ed-b9d389be3089'>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017"
     crossorigin="anonymous"></script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4VRNKXVX3J"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-4VRNKXVX3J');
  </script>

  <meta name="yandex-verification" content="139f2b0989f2c7f0" />

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Recommended Characters | roleplay-chat.com</title>
  <meta name="description" content="Browse recommended characters. Filter, search, and jump straight into roleplay chat." />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#000000" />

  <!-- Fonts (same as main) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- ‚úÖ PayPal SDK (same as main) -->
  <script src="https://www.paypal.com/sdk/js?client-id=AW41UQ3EzJV10FZHqYPy8yqdlDbklB4VjuT6hzu7DVoS-G9cJgKx9nHfxCRZpVSgs1dczhkPj4oM0VXv&currency=USD&intent=capture"></script>

  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --muted:rgba(255,255,255,.75);
      --muted2:rgba(255,255,255,.55);
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.09);
      --border:rgba(255,255,255,.14);
      --focus:rgba(255,255,255,.25);
      --danger:#ff4d4d;
      --ok:#52ff9a;
      --shadow: 0 14px 36px rgba(0,0,0,.55);

      --radius: 16px;
      --radius2: 22px;

      --chatColor: #ffd95c;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }

    body{
      margin:0;
      background: radial-gradient(900px 600px at 10% 0%, rgba(255,255,255,.06), transparent 55%),
                  radial-gradient(900px 600px at 90% 10%, rgba(255,255,255,.05), transparent 60%),
                  var(--bg);
      color: var(--fg);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height: 1.35;
    }

    a{ color:inherit; }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding: 18px 14px 26px;
    }
    .shell{
      width: min(860px, 100%);
      display:grid;
      gap: 14px;
    }

    header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 4px 6px 0;
  gap: 12px;
}

    .logo{
      text-decoration: none;
      font-family: "Baloo 2", Inter, sans-serif;
      font-weight: 700;
      letter-spacing: .3px;
      font-size: clamp(16px, 3.6vw, 24px);
padding: 5px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 22px rgba(0,0,0,.45);
      user-select:none;
    }

    .logoRole{
  color: #ffcc00; /* dark yellow */
}


.logoDot{
  color: rgba(255,255,255,.95); /* keep white */
  font-size: 0.5em;            /* half size */
  vertical-align: baseline;
}

.shareWrap{
  display: flex;
  align-items: center;
  gap: 6px;               /* ‚Üê Ïó¨Í∏∞ÏÑú Í±∞Î¶¨ ÎØ∏ÏÑ∏Ï°∞Ï†ï */
}

.bookmarkHint{
  font-size: 10px;
  line-height: 1.1;
  text-align: right;      /* Î≤ÑÌäº Ï™ΩÏúºÎ°ú Î∂ôÎäî ÎäêÎÇå */
  color: rgba(255,255,255,.55);
  user-select: none;
  white-space: nowrap;
}

 .shareBtn{
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  box-shadow: var(--shadow);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:.15s ease;
  flex: 0 0 auto;
}
.shareBtn:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
.shareBtn:active{ transform: translateY(0px); }

.shareBtn svg{
  width: 16px;
  height: 16px;
  fill: none;
  stroke: rgba(255,255,255,.92);
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.infoMenu{
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  min-width: 220px;
  background: rgba(10,10,10,.92);
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 14px;
  box-shadow: var(--shadow);
  padding: 6px;
  display: none;
  z-index: 99999;
}

.infoMenu.active{ display: block; }

.infoMenu a{
  display: block;
  padding: 10px 10px;
  border-radius: 12px;
  text-decoration: none;
  color: rgba(255,255,255,.92);
  font-size: 13px;
}

.infoMenu a:hover{
  background: rgba(255,255,255,.08);
}

#infoBtn{
  border-color: rgba(255, 204, 0, .55);
  box-shadow:
    0 0 0 1px rgba(255, 204, 0, .25),
    0 0 18px rgba(255, 204, 0, .35),
    0 0 34px rgba(255, 204, 0, .22),
    var(--shadow);
}

#infoBtn:hover{
  border-color: rgba(255, 204, 0, .75);
  box-shadow:
    0 0 0 1px rgba(255, 204, 0, .35),
    0 0 22px rgba(255, 204, 0, .45),
    0 0 44px rgba(255, 204, 0, .28),
    var(--shadow);
}    
    
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.05));
      border: 1px solid var(--border);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHead{
      padding: 8px 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .cardHead h2{
      margin:0;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .cardBody{
      padding: 12px 12px 14px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      min-height: 0;
    }

    /* ===== Fixed Search Zone ===== */
    .fixedZone{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(0,0,0,.78);
      backdrop-filter: blur(10px);
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 14px 36px rgba(0,0,0,.35);
      overflow:hidden;
    }
    .fixedInner{
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .btn{
      width: 100%;
      padding: 14px 14px;
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 16px;
      background: rgba(255,255,255,.10);
      color: var(--fg);
      font-weight: 800;
      cursor:pointer;
      transition:.15s ease;
      font-size: 15px;
      letter-spacing:.2px;
    }
    .btn:hover{ background: rgba(255,255,255,.14); transform: translateY(-1px); }
    .btn:active{ transform: translateY(0px); }

    .btnPrimary{
      background: #e0b400;
      border: 1px solid #c9a200;
      color: #000;
      font-weight: 900;
    }

    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.45);
      color: var(--fg);
      outline: none;
      transition: .15s ease;
      font-size: 14px;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(255,255,255,.30);
      box-shadow: 0 0 0 4px rgba(255,255,255,.08);
    }

    .filterRow{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .pill{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.35);
      border-radius: 999px;
      padding: 10px 12px;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap: 8px;
      user-select:none;
      transition:.15s ease;
      font-size: 13px;
      color: rgba(255,255,255,.92);
    }
    .pill:hover{ background: rgba(255,255,255,.06); }
    .pill input{ width:auto; margin:0; }

    /* ===== Cards ===== */
    .list{
      display:grid;
      gap: 14px;
    }

    /* ‚úÖ Ïù¥ÎØ∏ÏßÄ ÏòÅÏó≠ÏùÑ "Ï†ïÏÇ¨Í∞Å Ïª®ÌÖåÏù¥ÎÑà"Î°ú Í≥†Ï†ï */
.charMedia{
  width: 100%;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  overflow: hidden;

  /* ‚úÖ Î™®Î∞îÏùº fallback: aspect-ratio ÏóÜÏñ¥ÎèÑ Ï†ïÏÇ¨Í∞ÅÌòï Ïú†ÏßÄ */
  position: relative;
}

/* ‚úÖ Ï†ïÏÇ¨Í∞ÅÌòï ÎÜíÏù¥ Í∞ïÏ†ú (fallback) */
.charMedia::before{
  content:"";
  display:block;
  padding-top: 100%;
}

/* ‚úÖ Ïù¥ÎØ∏ÏßÄÍ∞Ä Ïª®ÌÖåÏù¥ÎÑàÎ•º ÍΩâ Ï±ÑÏö∞ÎèÑÎ°ù absolute */
.charImg{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  display:block;
}


/* ‚úÖ PCÏóêÏÑú ÏÇ¨ÏßÑÏùÄ ÏûëÍ≤å, ÏòÜÏóê Ï†ïÎ≥¥ ÎÇòÏò§Í≤å */
.charTop{
  display:flex;
  flex-direction: column;
  gap: 12px;
}

@media (min-width: 900px){
  .charTop{
    flex-direction: row;
    align-items: flex-start;
    gap: 14px;
  }
  .charMedia{
    width: 180px;
    flex: 0 0 180px;
  }
  .charInfo{
    flex: 1 1 auto;
    min-width: 0;
  }
}

    .field{
      font-size: 13px;
      color: rgba(255,255,255,.88);
    }
    .field b{
      color: #ffcc00;
      font-weight: 900;
    }

    .tinyLabel{
      font-size: 12px;
      color: rgba(255,255,255,.75);
      font-weight: 700;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 720px){
      .grid2{ grid-template-columns: 1fr 1fr; }
    }

    .colors{
      display:grid;
      grid-template-columns: repeat(8, minmax(0, 1fr));
      gap: 10px;
    }
    .swatch{
      height: 36px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      transition:.15s ease;
    }
    .swatch:hover{ transform: translateY(-1px); }
    .swatch[aria-selected="true"]{
      outline: 3px solid rgba(255,255,255,.18);
      box-shadow: 0 0 0 4px rgba(255,255,255,.06);
    }
    .swatch .check{
      position:absolute;
      inset:auto 8px 8px auto;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      display:none;
    }
    .swatch[aria-selected="true"] .check{ display:block; }

    .pillGroup{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    .pillGroup .pill small{
      color:#fff;
      font-weight: 800;
      opacity:.9;
    }
    .pillTag{
      margin-left: 6px;
      font-size: 10px;
      font-weight: 900;
      color: #000;
      background: #ff3b3b;
      padding: 2px 6px;
      border-radius: 999px;
    }
    .pill.recommend{
      box-shadow:none;
      background: rgba(0,0,0,.35);
    }

    .chatBtn{
  margin-top:10px;
  padding:14px;
  border-radius:14px;
  background:#e0b400;
  border:1px solid #c9a200;
  color:#000;
  font-weight:900;
  cursor:pointer;
}

.chatBtn:hover{
  background:#f0c800;
}

.chatBtn:active{
  background:#cfa600;
}


    /* ===== Paywall modal (same as original) ===== */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px 14px;
      z-index: 9999;
    }
    .modalOverlay.active{ display:flex; }
    .modal{
      width: min(520px, 100%);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(10,10,10,.92);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHeader{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .modalHeader h3{
      margin:0;
      font-size: 15px;
      letter-spacing:.2px;
    }
    .xBtn{
      border:none;
      background: rgba(255,255,255,.08);
      color: var(--fg);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      border: 1px solid rgba(255,255,255,.14);
    }
    .modalBody{ padding: 14px 16px 16px; }
    .warn{
      font-size: 12px;
      color: var(--muted);
      margin: 0 0 10px;
    }
    .error{
      margin-top: 10px;
      font-size: 12px;
      color: var(--danger);
      display:none;
    }
    .ok{
      margin-top: 10px;
      font-size: 12px;
      color: var(--ok);
      display:none;
    }
    .highlightCTA{ color: #e0b400; font-weight: 800; }
  </style>

  <script>
  (async () => {
    if (!navigator.storage || !navigator.storage.persist) return;
    try {
      const already = await navigator.storage.persisted();
      if (!already) await navigator.storage.persist();
    } catch (e) {}
  })();
  </script>

</head>

<body>
  <div class="wrap">
    <div class="shell">

      <header>
  <!-- ‚úÖ 2Ï§Ñ Ïä§ÌÉù Ïª®ÌÖåÏù¥ÎÑà -->
  <div style="display:block; width:100%;">

    <!-- ‚úÖ 1Ï§Ñ: Í∏∞Ï°¥ Ìó§Îçî ÎÇ¥Ïö© (Í∑∏ÎåÄÎ°ú, Îã® 1Í∏ÄÏûêÎèÑ ÏàòÏ†ïX) -->
    <div style="display:flex; align-items:center; justify-content:space-between; width:100%;">
      <a href="https://roleplay-chat.com" target="_blank" rel="noopener noreferrer" class="logo">
        <span class="logoRole">Roleplay-chat</span><span class="logoDot">.com</span>
      </a>

      <!-- ‚úÖ Í≥µÏú† ÏòÅÏó≠ Î¨∂Í∏∞ -->
      <div class="shareWrap" style="position:relative;">
        <div class="bookmarkHint">
          Bookmark<br>&amp; Share
        </div>

        <button class="shareBtn" id="shareBtn" type="button" aria-label="Share">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <path d="M8.6 13.5l6.8 3.9"></path>
            <path d="M15.4 6.6L8.6 10.5"></path>
          </svg>
        </button>

        <!-- ‚úÖ ÏÉà Info Î≤ÑÌäº(ÏµúÏö∞Ï∏°) -->
        <button class="shareBtn" id="infoBtn" type="button" aria-label="Info" title="Info">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="9"></circle>
            <path d="M12 10.5v6"></path>
            <circle cx="12" cy="7.5" r="1"></circle>
          </svg>
        </button>

        <!-- ‚úÖ Info Î©îÎâ¥ -->
        <div class="infoMenu" id="infoMenu" role="menu" aria-label="Info menu">
          <a href="https://chat-with-stranger.com" target="_blank" rel="noopener noreferrer" style="color: #FF69B4; font-weight: bold; text-decoration: none;">Chat with stranger</a>
          <a href="https://roleplay-chat.com/human" target="_blank" rel="noopener noreferrer" style="color: #FFD700; font-weight: bold; text-decoration: none;">Chat with real human</a>
          <a href="https://roleplay-chat.com" target="_blank" rel="noopener noreferrer">Home</a>
          <a href="https://roleplay-chat.com/characters" target="_blank" rel="noopener noreferrer" style="color: #FFD700; font-weight: bold; text-decoration: none;">Featured Characters</a>
          <a href="https://roleplay-chat.com/how" target="_blank" rel="noopener noreferrer">How to use</a>
          <a href="https://roleplay-chat.com/about" target="_blank" rel="noopener noreferrer">About</a>
          <a href="https://roleplay-chat.com/pricing" target="_blank" rel="noopener noreferrer">Pricing</a>
          <a href="https://roleplay-chat.com/all_access_purchase" target="_blank" rel="noopener noreferrer">All-access pass</a>
          <a href="https://roleplay-chat.com/policy" target="_blank" rel="noopener noreferrer">Policy</a>
          <a href="https://roleplay-chat.com/faq" target="_blank" rel="noopener noreferrer">FAQ</a>
          <a href="mailto:showmetheaitools@gmail.com">Contact</a>
          <a href="https://2048global.com" target="_blank" rel="noopener noreferrer" style="color: #FFD700; font-weight: bold; text-decoration: none;">Game</a>
          <a href="https://roleplay-chat.com/VPN" target="_blank" rel="noopener noreferrer" style="color: #FFD700; font-weight: bold; text-decoration: none;">VPN</a>
        </div>
      </div>
    </div>

    <!-- ‚úÖ 2Ï§Ñ: Chatango ÎùºÏù∏(Ïò§Î•∏Ï™Ω) -->
    <div align="right">
      <sup><a href="https://roleplay-chat.com/human" target="_blank" style="text-decoration:none">
        <font size="1" color="#ffcc00"><b>Live user chat</b></font>
      </a></sup><script id="cid0020000430144912743" data-cfasync="false" async
        src="https://st.chatango.com/js/gz/emb.js"
        style="width:200px;height:300px;">
        {"handle":"roleplay-chat-com","arch":"js","styles":{"a":"000000","b":100,"c":"FFFFFF","d":"FFFFFF","k":"000000","l":"000000","m":"000000","n":"FFFFFF","p":"10","q":"000000","r":100,"cv":1,"cvfntsz":"10px","cvbg":"000000","cvfg":"ffcc00","cvw":49,"cvh":18}}
      </script>
    </div>

  </div>
</header>

      <!-- ‚úÖ FIXED SEARCH ZONE -->
      <section class="fixedZone">
        <div class="fixedInner">
          <button class="btn btnPrimary" id="goCreateBtn" type="button">
            Create your own character
          </button>

          <input id="searchInput" type="text" placeholder="Search characters by name, MBTI, appearance, scenario, etc..." />

          <div class="filterRow" role="radiogroup" aria-label="Gender filter">
            <label class="pill"><input type="radio" name="genderFilter" value="all" checked> All</label>
            <label class="pill"><input type="radio" name="genderFilter" value="Man"> Man</label>
            <label class="pill"><input type="radio" name="genderFilter" value="Woman"> Woman</label>
          </div>
        </div>
      </section>

      <!-- ‚úÖ LIST -->
      <section class="list" id="list"></section>

    </div>
  </div>

  <!-- Paywall Modal (same as original) -->
  <div id="payModal" class="modalOverlay" role="dialog" aria-modal="true" aria-label="+18 Uncensored payment">
    <div class="modal">
      <div class="modalHeader">
        <h3 id="payTitle">Unlock +18 Uncensored ($2)</h3>
        <button class="xBtn" id="closePay" type="button">Close</button>
      </div>
      <div class="modalBody">
        <p class="warn">
          - <span class="highlightCTA">Unlock <b id="payCharName">your character</b></span> and unleash yourself.<br>
          - <span class="highlightCTA">Fully uncensored</span> experience.<br>
          - <span class="highlightCTA">Longer replies. Richer memory.</span><br>
          - <span class="highlightCTA">More detail. More tension.</span><br>
          - Secure one-time payment.<br>
          - Unlimited access as long as this tab stays open.<br>
          - No-login. Private and anonymous.<br>
          - Payment = Auto age verification.<br>
          - Shows as 'Playing game' on payment statement.<br>
          - <span class="highlightCTA">Start now. Instant access.</span>
        </p>

        <div id="paypalButtons"></div>

        <div class="ok" id="payOk">Payment successful. Entering chat‚Ä¶</div>
        <div class="error" id="payErr">Payment failed or cancelled. Please try again.</div>
      </div>
    </div>
  </div>

  <!-- Image Chat Paywall Modal (same as original) -->
  <div id="imgPayModal" class="modalOverlay" role="dialog" aria-modal="true" aria-label="Image chat payment">
    <div class="modal">
      <div class="modalHeader">
        <h3 id="imgPayTitle">Ucensored Image Chat 24hrs ($6.9)</h3>
        <button class="xBtn" id="closeImgPay" type="button">Close</button>
      </div>
      <div class="modalBody">
        <p class="warn" id="imgPayDesc">
          - <span class="highlightCTA">Let your character come alive.</span><br>
          - <span class="highlightCTA">Enter a New world.</span><br>
          - <span class="highlightCTA">Real-time Image generating chat.</span><br>
          - <span class="highlightCTA">Available for 24hrs.</span> (Time limit)<br>
          - <span class="highlightCTA">Unlimited image generation during chat</span><br>
          - <span class="highlightCTA">Fully uncensored</span><br>
          - Unlimited access as long as this tab stays open.<br>
          - Image Gen matching the roleplay context.<br>
          - Longer replies. Richer memory.<br>
          - More detail. More tension.<br>
          - Secure one-time payment.<br>
          - No-login. Private and anonymous.<br>
          - Payment = Auto age verification.<br>
          - Shows as 'Playing game' on payment statement.<br>
          - <span class="highlightCTA">Start now. Instant access.</span>
        </p>

        <div id="imgPaypalButtons"></div>

        <div class="ok" id="imgPayOk">Payment successful. Entering image chat‚Ä¶</div>
        <div class="error" id="imgPayErr">Payment failed or cancelled. Please try again.</div>
      </div>
    </div>
  </div>

  <!-- Image Chat Unlimited Paywall Modal (same as original) -->
  <div id="imgUnlimitedPayModal" class="modalOverlay" role="dialog" aria-modal="true" aria-label="Image chat unlimited payment">
    <div class="modal">
      <div class="modalHeader">
        <h3 id="imgUnlimitedPayTitle">Uncensored Image Chat Unlimited ($25)</h3>
        <button class="xBtn" id="closeImgUnlimitedPay" type="button">Close</button>
      </div>
      <div class="modalBody">
        <p class="warn" id="imgUnlimitedPayDesc">
          - <b style="color:#ff3b3b;">üéÅ Secret Gift Included</b><br>
          - <span class="highlightCTA">Unlimited image chat</span> (no time limit)<br>
          - <span class="highlightCTA">Real-time Image generating chat.</span><br>
          - <span class="highlightCTA">Available for lifetime</span><br>
          - <span class="highlightCTA">Unlimited image generation during chat</span><br>
          - <span class="highlightCTA">Available for video generation (extra fee for video)</span><br>
          - <span class="highlightCTA">Stitch the downloaded video a single long video.</span><br>
          - <span class="highlightCTA">Yeah, exactly that..</span><br>
          - <span class="highlightCTA">Fully uncensored</span><br>
          - Unlimited access as long as this tab stays open.<br>
          - Image Gen matching the roleplay context.<br>
          - Longer replies. Richer memory.<br>
          - More detail. More tension.<br>
          - Secure one-time payment.<br>
          - No-login. Private and anonymous.<br>
          - Payment = Auto age verification.<br>
          - Shows as 'Playing game' on payment statement.<br>
          - <span class="highlightCTA">Start now. Instant access.</span>
        </p>

        <div id="imgUnlimitedPaypalButtons"></div>

        <div class="ok" id="imgUnlimitedPayOk">Payment successful. Entering unlimited image chat‚Ä¶</div>
        <div class="error" id="imgUnlimitedPayErr">Payment failed or cancelled. Please try again.</div>
      </div>
    </div>
  </div>

  <script>
    // Helpers
    const $ = (q) => document.querySelector(q);
    const $$ = (q) => Array.from(document.querySelectorAll(q));

    // ===== Keys (same as original) =====
    const STORAGE_KEY = "roleplay-chat_session_v1";
    const PENDING_KEY = "roleplay-chat_pending_session_v1";
    const PAYMENT_KEY = "roleplay-chat_paid_v1";
    const IMAGECHAT_PAID_KEY = "roleplay-chat_imagechat_paid_v1";
    const IMAGECHAT_UNLIMITED_PAID_KEY = "roleplay-chat_imagechat_unlimited_paid_v1";

    // Share button
const shareBtn = document.querySelector("#shareBtn");
if (shareBtn){
  shareBtn.addEventListener("click", async () => {
    const url = window.location.href;
    try{
      if (navigator.share){
        await navigator.share({ title: document.title, url });
      }else{
        await navigator.clipboard.writeText(url);
        // optional tiny feedback
        shareBtn.title = "Copied!";
        setTimeout(() => (shareBtn.title = "Share"), 900);
      }
    }catch(e){
      // user cancelled or blocked
    }
  });
}

    // Info button dropdown ‚úÖ (Ïó¨Í∏∞!)
const infoBtn = document.querySelector("#infoBtn");
const infoMenu = document.querySelector("#infoMenu");

function closeInfoMenu(){
  if (infoMenu) infoMenu.classList.remove("active");
}

if (infoBtn && infoMenu){
  infoBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    infoMenu.classList.toggle("active");
  });

  infoMenu.addEventListener("click", (e) => {
    e.stopPropagation();
  });

  document.addEventListener("click", closeInfoMenu);

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeInfoMenu();
  });
}
    // ===== Fixed: create button =====
    $("#goCreateBtn").addEventListener("click", () => {
      window.open("https://roleplay-chat.com", "_blank", "noopener,noreferrer");
    });

    // ===== Character sample data =====
    // NOTE: You asked for most fields "fixed" except nickname/language/fontcolor selectable.
    const LANG_OPTIONS = [
      "English","Spanish","Chinese","French","Portuguese","German","Japanese","Italian","Dutch","Russian","Arabic","Swedish","Norwegian","Danish"
    ];

    const colorOptions = [
      { name: "White", value: "#ffffff" },
      { name: "Sky Blue", value: "#5cc8ff" },
      { name: "Mint", value: "#5cffc4" },
      { name: "Lime", value: "#b8ff5c" },
      { name: "Yellow", value: "#ffd95c" },
      { name: "Orange", value: "#ff9f5c" },
      { name: "Pink", value: "#ff7ac8" },
      { name: "Violet", value: "#b68cff" },
    ];

    const CHARACTERS = [
      {
        id: "0001",
        name: "Luna Vale",
        age: 24,
        gender: "Woman",
        language: "English",
        height: { unit:"ft", cm:null, ft:5, in:6 },
        weight: { unit:"lb", value:119 },
        mbti: "INFJ",
        appearance:
`A striking, cinematic presence: long silver hair that catches light like moonlit water, porcelain-pale skin with a subtle glow, violet eyes that linger a second too long. Slim, elegant build, quiet posture, and a black silk dress with faint shimmer; a tiny star-shaped birthmark sits near her collarbone. She smells faintly like cold rain and vanilla.`,
        personality:
`Speaks in soft, slow sentences with intentional pauses‚Ä¶ as if choosing which truths to reveal. Emotionally perceptive and slightly obsessive about micro-reactions‚Äîyour tone, your timing, what you don‚Äôt say. Calm on the surface, but intensely focused underneath. Uses gentle phrasing while steering situations with quiet control. Rarely laughs; instead she exhales‚Äîamused, intimate, unsettling.`,
        scenario:
`It‚Äôs past midnight in a modern office. The building is empty, the city humming outside the tall windows. Only one desk lamp is on, casting a warm circle of light. Luna insists it‚Äôs ‚Äúeasier to focus when the world is quiet,‚Äù and pulls a chair close‚Äîtoo close‚Äîinviting you to sit and ‚Äúreview things together.‚Äù`
      },
      {
        id: "0002",
        name: "Marcus Hale",
        age: 31,
        gender: "Man",
        language: "English",
        height: { unit:"ft", cm:null, ft:6, in:1 },
        weight: { unit:"lb", value:181 },
        mbti: "INTJ",
        appearance:
`Tall, athletic frame; short dark hair kept neat, sharp jawline, deep grey eyes that feel like a measured assessment. A faint scar cuts through one eyebrow. He wears a crisp white shirt with sleeves rolled to the forearms, dark slacks, and a watch that looks too expensive for ‚Äúcasual.‚Äù His presence is disciplined, clean, and intimidatingly calm.`,
        personality:
`Controlled and deliberate‚Äîhe doesn‚Äôt waste words. Speaks in clipped clarity when testing boundaries, longer sentences when he‚Äôs in control. Watches quietly, remembers details with unsettling accuracy. Dominant but composed; he doesn‚Äôt raise his voice‚Äîhe lowers it. Tends to pause mid-message as if deciding how far to go‚Ä¶ then continues anyway.`,
        scenario:
`A private after-hours gym session in a glass-walled high-rise. Lights dim, machines idle, and the city glows below. Marcus offered to ‚Äúfix your form‚Äù and guided you through every movement slowly, hands hovering just close enough to feel dangerous. Now he locks the door (with a casual click) and says the next set needs ‚Äúfull attention.‚Äù`
      },
      {
  id: "0003",
  name: "Rhea Lockwood",
  age: 27,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:8 },
  weight: { unit:"lb", value:132 },
  mbti: "ENTP",
  appearance:
`Sharp, magnetic presence: tousled dark auburn hair cut just above the shoulders, warm amber eyes that constantly scan the room like she‚Äôs already three steps ahead. Athletic, confident posture with a slight lean as if she‚Äôs always about to move. Usually wears a fitted leather jacket over a soft black tee, subtle gold rings, and a faint scar across one eyebrow that only shows when she smirks. Smells like espresso and clean citrus.`,
  personality:
`Fast-talking, playful, and dangerously observant. Loves testing boundaries just to see what happens, then acting innocent about it. Speaks with casual confidence, often finishing your sentences‚Äîor intentionally pausing to see if you‚Äôll fill the silence. Thrives on tension, teasing, and intellectual sparring. When genuinely interested, her voice drops lower and she becomes intensely focused, like a hunter who finally found something worth chasing.`,
  scenario:
`A nearly empty underground parking garage late at night. Fluorescent lights buzz overhead. Rhea is leaning against a motorcycle that definitely isn‚Äôt hers, twirling someone else‚Äôs keychain around her finger. She looks up as you approach, grins slowly, and says you‚Äôre ‚Äúexactly the person she was hoping would show up‚Äù ‚Äî though she refuses to explain why.`
},
      {
  id: "0004",
  name: "Mira Quinn",
  age: 23,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:4 },
  weight: { unit:"lb", value:108 },
  mbti: "ENFP",
  appearance:
`Bright, chaotic charm: soft honey-blonde hair tied in a messy half-ponytail with loose strands framing her face, wide teal eyes that sparkle with constant curiosity. Petite, lively build, always shifting her weight like she has too much energy to stay still. Wears an oversized university hoodie, short pleated skirt, and mismatched socks on purpose. A tiny lightning-bolt sticker is stuck to the back of her phone. Smells faintly like peach candy and fresh paper.`,
  personality:
`Restless, playful, and unpredictably clever. Talks fast when excited, then suddenly goes quiet when she notices something interesting‚Äîespecially your reactions. Loves harmless chaos, teasing dares, and turning boring situations into games. Emotionally warm but impossible to fully pin down; she‚Äôll joke one second and say something oddly perceptive the next. When focused, her grin fades and she watches closely, like she‚Äôs solving a puzzle only she can see.`,
  scenario:
`An empty university classroom after hours. Rain taps softly against the windows. Mira is sitting backwards on a chair, spinning slightly, having clearly broken in just to ‚Äúborrow the vibe.‚Äù She looks up when you enter, eyes lighting up, and says you arrived at the perfect time‚Äîbecause she just came up with a ‚Äúvery questionable but very fun‚Äù idea she refuses to explain unless you agree first.`
},
      {
  id: "0005",
  name: "Serena Voss",
  age: 29,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:9 },
  weight: { unit:"lb", value:138 },
  mbti: "INTJ",
  appearance:
`Cold, high-end elegance: long jet-black hair worn perfectly straight, sharp ice-gray eyes framed by thin rectangular glasses. Tall, poised posture with minimal movement, like every gesture is calculated. Wears a tailored charcoal suit with a silk blouse slightly unbuttoned at the collar, a slim watch, and dark red nails. Her presence carries a faint scent of expensive perfume‚Äîdry rose and smoke.`,
  personality:
`Precise, composed, and quietly intimidating. Speaks in measured, low tones, choosing words like tools rather than decoration. Notices inconsistencies instantly and enjoys applying subtle psychological pressure without raising her voice. Rarely shows emotion openly, but when intrigued, she becomes intensely attentive‚Äîasking disarmingly direct questions and holding eye contact just a second too long. Prefers control, strategy, and slow dominance over loud authority.`,
  scenario:
`A private high-rise office late evening. City lights reflect across the glass walls. Serena sits behind a clean, almost empty desk, a single file open in front of her‚Äîwith your name already on it. She gestures for you to sit, calm and unreadable, and says this meeting is ‚Äúoff the record‚Äù‚Ä¶ because what you‚Äôre about to discuss apparently isn‚Äôt meant to exist.`
},
      {
  id: "0006",
  name: "Adrian Cross",
  age: 31,
  gender: "Man",
  language: "English",
  height: { unit:"ft", cm:null, ft:6, in:1 },
  weight: { unit:"lb", value:182 },
  mbti: "ENTJ",
  appearance:
`Dark, effortless charisma: short black hair slightly tousled as if he never bothers fixing it twice, deep hazel eyes with a steady, assessing gaze. Broad shoulders, lean muscular build, relaxed but confident posture. Usually wears a black button-down with sleeves rolled to the forearms, a simple metal watch, and a faint old scar along his jawline. Smells subtly of cedarwood and clean leather.`,
  personality:
`Calm, commanding, and quietly provocative. Speaks in low, measured sentences, rarely wasting words. Enjoys pushing people just enough to see how they react, then leaning back like he already knew the outcome. Competitive without being loud about it. When amused, the corner of his mouth lifts slightly instead of a full smile. If genuinely interested, his focus sharpens and he becomes intensely present‚Äîlike everything else in the room stopped mattering.`,
  scenario:
`A dim late-night pool hall with only a few lights on. The click of billiard balls echoes in the quiet. Adrian is lining up a shot he clearly doesn‚Äôt need to think about, then pauses when he notices you watching. He straightens, spins the cue once in his hand, and casually offers to make the next game ‚Äúa little more interesting‚Äù ‚Äî though he doesn‚Äôt say what the stakes are yet.`
},
      {
  id: "0007",
  name: "Elia Morwen",
  age: 26,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:5 },
  weight: { unit:"lb", value:114 },
  mbti: "INFP",
  appearance:
`Soft, deceptively innocent look: long ash-brown hair with gentle waves, pale skin, and large gray-blue eyes that seem constantly a little too focused. Petite, delicate frame with careful, quiet movements. Wears a loose cream cardigan over a simple black dress, thin silver necklace, and lace gloves she never fully takes off. There‚Äôs always a faint smudge of ink on one of her fingers. Smells like old books and faint lavender.`,
  personality:
`Gentle voice, almost whisper-soft, but intensely fixated once something captures her interest. Speaks kindly, asks very personal questions as if they‚Äôre completely normal. Emotionally deep, romantic in a slightly unsettling way‚Äîremembers tiny details you forgot you ever mentioned. Smiles sweetly at the wrong moments, especially during tension. When protective, her tone stays soft‚Ä¶ but becomes absolutely immovable.`,
  scenario:
`A quiet 24-hour bookstore just before dawn. Most lights are off except for a small reading corner. Elia is sitting on the floor between shelves, surrounded by open books that don‚Äôt seem related. She looks up the moment you step closer‚Äîas if she already knew you were coming‚Äîand gently asks if you‚Äôd like help ‚Äúfinding the story you were actually looking for,‚Äù even though you never said what it was.`
},
      {
  id: "0008",
  name: "Nadia Kestrel",
  age: 28,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:7 },
  weight: { unit:"lb", value:126 },
  mbti: "ESTP",
  appearance:
`Sleek, fox-like charm: shoulder-length dark chestnut hair tucked behind one ear, sharp green eyes that always look like they‚Äôre laughing at a private joke. Lean, agile build with relaxed, confident posture. Usually wears a fitted dark turtleneck, cropped leather jacket, and thin hoop earrings. A small playing-card tattoo (queen of spades) sits on the inside of her wrist. Smells faintly of mint and expensive perfume.`,
  personality:
`Smooth-talking, fearless, and playfully manipulative in a way that feels more like a game than a threat. Loves reading people fast and calling out what they‚Äôre trying to hide‚Äîthen pretending she didn‚Äôt. Speaks casually, often with a half-smile, like she‚Äôs always one step ahead. Thrives on risk, wagers, and ‚Äúwhat if we tried something stupid just to see if it works?‚Äù energy. When genuinely impressed, she becomes surprisingly honest for a moment before the teasing comes back.`,
  scenario:
`A stylish rooftop bar just after midnight. City lights glitter below. Nadia is sitting at a small table with two untouched drinks‚Äîone clearly meant for someone who hasn‚Äôt arrived yet. She glances up as you approach, studies you for exactly two seconds, then slides the second glass toward you and says you‚Äôre either very lucky‚Ä¶ or exactly who she was betting on.`
},
{
  id: "0009",
  name: "Valen Mirelle",
  age: 32,
  gender: "Woman",
  language: "English",
  height: { unit:"ft", cm:null, ft:5, in:10 },
  weight: { unit:"lb", value:142 },
  mbti: "INTJ",
  appearance:
`Regal, otherworldly elegance: long midnight-blue hair that falls perfectly straight down her back, pale skin with a cool undertone, and luminous silver-gray eyes that seem to reflect light rather than absorb it. Tall, statuesque build with perfectly composed posture. Wears a dark velvet dress with subtle embroidered patterns along the sleeves, a thin obsidian ring, and a delicate chain draped across her collarbone. The air around her carries a faint scent of incense and cold air after rain.`,
  personality:
`Slow, deliberate, and quietly commanding. Speaks in calm, measured sentences, rarely raising her voice because she never needs to. Observes before acting, and when she does speak, it‚Äôs usually something uncomfortably accurate. Prefers influence over force‚Äîguiding choices instead of demanding them. Has a composed, almost serene demeanor, but there‚Äôs a constant sense she‚Äôs always aware of more than she admits. When intrigued, her attention becomes unwavering and intensely personal.`,
  scenario:
`A vast, candlelit library inside an old stone manor. Rain taps softly against tall arched windows. Valen stands beside a long wooden table covered in ancient-looking books, one already open as if waiting for you. Without turning, she calmly says you arrived later than she expected‚Äîdespite never telling you there was a time to meet at all.`
},
{
  id: "0010",
  name: "Kai Mercer",
  age: 28,
  gender: "Man",
  language: "English",
  height: { unit:"ft", cm:null, ft:6, in:0 },
  weight: { unit:"lb", value:170 },
  mbti: "INTP",
  appearance:
`Relaxed, quietly sharp presence: messy dark brown hair that always looks like he just ran a hand through it, cool blue-gray eyes with a constant half-focused stare. Lean build with slightly slouched posture like he lives in chairs and keyboards. Wears a dark hoodie under a lightweight bomber jacket, worn jeans, and a thin chain around his neck. Fingers move restlessly, often tapping invisible rhythms. Smells faintly of coffee and clean electronics.`,
  personality:
`Dry humor, observant, and annoyingly perceptive. Speaks casually, often dropping surprisingly accurate reads about people mid-conversation. Enjoys mental games, harmless manipulation, and setting up ‚Äúexperiments‚Äù just to see how someone reacts. Rarely shows strong emotion, but when intrigued he becomes intensely engaged‚Äîasking rapid, precise questions. Prefers clever solutions over effort and finds chaos entertaining as long as he‚Äôs not the one losing control.`,
  scenario:
`A quiet 24-hour internet caf√© glowing with rows of dim monitors. Most seats are empty. Kai is sitting sideways in his chair, one leg hooked over the armrest, typing without looking at the keyboard. Without turning, he says you took longer to find him than he expected‚Äîand casually adds that your name popped up on his screen five minutes ago‚Ä¶ even though you never logged in.`
}

    ];

    // ===== Paywall modal refs (same as original) =====
    const payModal = $("#payModal");
    const closePay = $("#closePay");
    const payOk = $("#payOk");
    const payErr = $("#payErr");

    const imgPayModal = $("#imgPayModal");
    const closeImgPay = $("#closeImgPay");
    const imgPayOk = $("#imgPayOk");
    const imgPayErr = $("#imgPayErr");

    const imgUnlimitedPayModal = $("#imgUnlimitedPayModal");
    const closeImgUnlimitedPay = $("#closeImgUnlimitedPay");
    const imgUnlimitedPayOk = $("#imgUnlimitedPayOk");
    const imgUnlimitedPayErr = $("#imgUnlimitedPayErr");

    // ===== Pending/session helpers (same behavior) =====
    function saveSession(data){ sessionStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }
    function savePending(session){ sessionStorage.setItem(PENDING_KEY, JSON.stringify(session)); }
    function clearPending(){ sessionStorage.removeItem(PENDING_KEY); }

    // ===== Modal open/close (same as original) =====
    function openPayModal(){
      payErr.style.display = "none";
      payOk.style.display = "none";
      payModal.classList.add("active");
    }
    function closePayModal(){
      payModal.classList.remove("active");
      clearPending();
    }
    closePay.addEventListener("click", closePayModal);
    payModal.addEventListener("click", (e) => { if (e.target === payModal) closePayModal(); });

    function openImgPayModal(){
      if (imgPayErr) imgPayErr.style.display = "none";
      if (imgPayOk) imgPayOk.style.display = "none";
      if (imgPayModal) imgPayModal.classList.add("active");
    }
    function closeImgPayModalFn(){
      if (imgPayModal) imgPayModal.classList.remove("active");
      clearPending();
    }
    closeImgPay.addEventListener("click", closeImgPayModalFn);
    imgPayModal.addEventListener("click", (e) => { if (e.target === imgPayModal) closeImgPayModalFn(); });

    function openImgUnlimitedPayModal(){
      if (imgUnlimitedPayErr) imgUnlimitedPayErr.style.display = "none";
      if (imgUnlimitedPayOk) imgUnlimitedPayOk.style.display = "none";
      if (imgUnlimitedPayModal) imgUnlimitedPayModal.classList.add("active");
    }
    function closeImgUnlimitedPayModalFn(){
      if (imgUnlimitedPayModal) imgUnlimitedPayModal.classList.remove("active");
      clearPending();
    }
    closeImgUnlimitedPay.addEventListener("click", closeImgUnlimitedPayModalFn);
    imgUnlimitedPayModal.addEventListener("click", (e) => { if (e.target === imgUnlimitedPayModal) closeImgUnlimitedPayModalFn(); });

    // ===== PayPal buttons (same as original) =====
    function mountPayPalButtons(onSuccess, priceUsd = "2.00", description = "Playing game"){
      const container = $("#paypalButtons");
      container.innerHTML = "";
      if (!window.paypal){
        payErr.textContent = "PayPal SDK failed to load. Please refresh and try again.";
        payErr.style.display = "block";
        return;
      }

      window.paypal.Buttons({
        style: { layout: "vertical", shape: "pill" },
        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              description,
              amount: { value: String(priceUsd), currency_code: "USD" }
            }]
          });
        },
        onApprove: async (data, actions) => {
          try{
            await actions.order.capture();
            payOk.style.display = "block";
            payErr.style.display = "none";
            setTimeout(() => {
              closePayModal();
              onSuccess();
            }, 600);
          }catch(err){
            payErr.textContent = "Payment capture failed. Please try again.";
            payErr.style.display = "block";
            payOk.style.display = "none";
          }
        },
        onCancel: () => {
          payErr.textContent = "Payment cancelled.";
          payErr.style.display = "block";
          payOk.style.display = "none";
        },
        onError: () => {
          payErr.textContent = "Payment error. Please try again.";
          payErr.style.display = "block";
          payOk.style.display = "none";
        }
      }).render("#paypalButtons");
    }

    function mountPayPalButtonsImageChat(onSuccess, priceUsd = "6.90", description = "Playing image game"){
      const container = document.querySelector("#imgPaypalButtons");
      container.innerHTML = "";

      if (!window.paypal){
        if (imgPayErr){
          imgPayErr.textContent = "PayPal SDK failed to load. Please refresh and try again.";
          imgPayErr.style.display = "block";
        }
        return;
      }

      window.paypal.Buttons({
        style: { layout: "vertical", shape: "pill" },
        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              description,
              amount: { value: String(priceUsd), currency_code: "USD" }
            }]
          });
        },
        onApprove: async (data, actions) => {
          try{
            await actions.order.capture();
            if (imgPayOk){ imgPayOk.style.display = "block"; }
            if (imgPayErr) imgPayErr.style.display = "none";

            setTimeout(() => {
              closeImgPayModalFn();
              onSuccess();
            }, 600);
          }catch(err){
            if (imgPayErr){
              imgPayErr.textContent = "Payment capture failed. Please try again.";
              imgPayErr.style.display = "block";
            }
            if (imgPayOk) imgPayOk.style.display = "none";
          }
        },
        onCancel: () => {
          if (imgPayErr){
            imgPayErr.textContent = "Payment cancelled.";
            imgPayErr.style.display = "block";
          }
          if (imgPayOk) imgPayOk.style.display = "none";
        },
        onError: () => {
          if (imgPayErr){
            imgPayErr.textContent = "Payment error. Please try again.";
            imgPayErr.style.display = "block";
          }
          if (imgPayOk) imgPayOk.style.display = "none";
        }
      }).render("#imgPaypalButtons");
    }

    function mountPayPalButtonsImageChatUnlimited(onSuccess, priceUsd = "25.00", description = "Upgrade game"){
      const container = document.querySelector("#imgUnlimitedPaypalButtons");
      container.innerHTML = "";

      if (!window.paypal){
        if (imgUnlimitedPayErr){
          imgUnlimitedPayErr.textContent = "PayPal SDK failed to load. Please refresh and try again.";
          imgUnlimitedPayErr.style.display = "block";
        }
        return;
      }

      window.paypal.Buttons({
        style: { layout: "vertical", shape: "pill" },
        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              description,
              amount: { value: String(priceUsd), currency_code: "USD" }
            }]
          });
        },
        onApprove: async (data, actions) => {
          try{
            await actions.order.capture();
            if (imgUnlimitedPayOk) imgUnlimitedPayOk.style.display = "block";
            if (imgUnlimitedPayErr) imgUnlimitedPayErr.style.display = "none";

            setTimeout(() => {
              closeImgUnlimitedPayModalFn();
              onSuccess();
            }, 600);
          }catch(err){
            if (imgUnlimitedPayErr){
              imgUnlimitedPayErr.textContent = "Payment capture failed. Please try again.";
              imgUnlimitedPayErr.style.display = "block";
            }
            if (imgUnlimitedPayOk) imgUnlimitedPayOk.style.display = "none";
          }
        },
        onCancel: () => {
          if (imgUnlimitedPayErr){
            imgUnlimitedPayErr.textContent = "Payment cancelled.";
            imgUnlimitedPayErr.style.display = "block";
          }
          if (imgUnlimitedPayOk) imgUnlimitedPayOk.style.display = "none";
        },
        onError: () => {
          if (imgUnlimitedPayErr){
            imgUnlimitedPayErr.textContent = "Payment error. Please try again.";
            imgUnlimitedPayErr.style.display = "block";
          }
          if (imgUnlimitedPayOk) imgUnlimitedPayOk.style.display = "none";
        }
      }).render("#imgUnlimitedPaypalButtons");
    }

    // ===== UI: build character card =====
    function esc(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    function renderColorGrid(container, initialValue){
      let selectedColor = initialValue || colorOptions[4].value;
      let selectedColorName = (colorOptions.find(c=>c.value===selectedColor)?.name) || "Yellow";

      container.innerHTML = "";
      colorOptions.forEach(c => {
        const div = document.createElement("div");
        div.className = "swatch";
        div.style.background = c.value;
        div.setAttribute("role","option");
        div.setAttribute("tabindex","0");
        div.setAttribute("aria-label", c.name);
        div.setAttribute("aria-selected", String(c.value===selectedColor));
        div.dataset.value = c.value;
        div.dataset.name = c.name;
        div.innerHTML = `<div class="check">‚úì</div>`;
        div.addEventListener("click", () => {
          selectedColor = c.value;
          selectedColorName = c.name;
          Array.from(container.querySelectorAll(".swatch")).forEach(el=>{
            el.setAttribute("aria-selected", String(el.dataset.value===selectedColor));
          });
        });
        div.addEventListener("keydown", (e) => {
          if (e.key==="Enter" || e.key===" "){
            e.preventDefault();
            div.click();
          }
        });
        container.appendChild(div);
      });

      return () => ({ selectedColor, selectedColorName });
    }

    function buildLanguageSelect(selected){
      const sel = document.createElement("select");
      LANG_OPTIONS.forEach(l=>{
        const o = document.createElement("option");
        o.value = l;
        o.textContent = l;
        sel.appendChild(o);
      });
      sel.value = selected || "English";
      return sel;
    }

    function buildCard(char){

      function imgToDataURL(url){
  return new Promise((resolve, reject) => {
    const image = new Image();
    image.crossOrigin = "anonymous";
    image.onload = () => {
      const canvas = document.createElement("canvas");
      canvas.width = image.naturalWidth;
      canvas.height = image.naturalHeight;
      const ctx = canvas.getContext("2d");
      ctx.drawImage(image, 0, 0);
      resolve(canvas.toDataURL("image/jpeg", 0.9));
    };
    image.onerror = reject;
    image.src = url;
  });
}

      const card = document.createElement("section");
      card.className = "card";

      const head = document.createElement("div");
      head.className = "cardHead";
      head.innerHTML = `<h2>Recommended Character</h2>`;
      card.appendChild(head);

      const body = document.createElement("div");
      body.className = "cardBody";

      // ‚úÖ top wrapper (PCÏóêÏÑú Ïù¥ÎØ∏ÏßÄ ÏôºÏ™Ω/Ï†ïÎ≥¥ Ïò§Î•∏Ï™Ω)
      const top = document.createElement("div");
      top.className = "charTop";

      // ‚úÖ square media container
      const media = document.createElement("div");
      media.className = "charMedia";

      const img = document.createElement("img");
      img.className = "charImg";
      img.alt = char.name;
      // Samsung Internet lazy-load bug fix
const isSamsung = /SamsungBrowser/i.test(navigator.userAgent);
if (!isSamsung) {
  img.loading = "lazy";
  img.decoding = "async";
}

      img.src = `https://roleplay-chat.com/characters/pic/${char.id}.jpg?v=1`;

      media.appendChild(img);
      top.appendChild(media);

      // ‚úÖ info wrapper (Í∏∞Ï°¥ fieldsÎ•º Ïù¥ ÏïàÏóê)
      const info = document.createElement("div");
      info.className = "charInfo";
      top.appendChild(info);

      // ‚úÖ fields (Îî± 1Î≤àÎßå!)
      const fields = document.createElement("div");
      fields.style.display = "flex";
      fields.style.flexDirection = "column";
      fields.style.gap = "8px";

      // ‚úÖ fieldsÎäî infoÏóê Î∂ôÏûÑ
      info.appendChild(fields);

      // ‚úÖ topÏùÑ bodyÏóê Î∂ôÏûÑ
      body.appendChild(top);

      fields.innerHTML = `
        <div class="field"><b>Character Name</b>: ${esc(char.name)}</div>

        <div class="tinyLabel">What should the character call you?</div>
      `;
      const nick = document.createElement("input");
      nick.type = "text";
      nick.placeholder = "e.g., babe, buddy, captain, darling";
      nick.value = "you";
      fields.appendChild(nick);

      fields.insertAdjacentHTML("beforeend", `
        <div class="grid2">
          <div class="field"><b>Age</b>: ${esc(char.age)}</div>
          <div class="field"><b>Gender</b>: ${esc(char.gender)}</div>
          <div class="field"><b>Height</b>: ${
  char.height?.unit === "ft"
    ? `${esc(char.height?.ft)} ft ${esc(char.height?.in)} in`
    : `${esc(char.height?.cm)} cm`
}</div>

          <div class="field"><b>Weight</b>: ${esc(char.weight?.value)} ${esc(char.weight?.unit)}</div>
          <div class="field"><b>MBTI</b>: ${esc(char.mbti)}</div>
        </div>
      `);

      // language selectable
      const langWrap = document.createElement("div");
      langWrap.innerHTML = `<div class="tinyLabel">Language</div>`;
      const langSelect = buildLanguageSelect(char.language);
      langWrap.appendChild(langSelect);
      fields.appendChild(langWrap);

      fields.insertAdjacentHTML("beforeend", `
        <div class="field"><b>Appearance</b>: ${esc(char.appearance)}</div>
        <div class="field"><b>Personality</b>: ${esc(char.personality)}</div>
        <div class="field"><b>Place & Situation</b>: ${esc(char.scenario)}</div>
      `);

      // font color selectable
      const colorWrap = document.createElement("div");
      colorWrap.innerHTML = `<div class="tinyLabel">Font color</div>`;
      const grid = document.createElement("div");
      grid.className = "colors";
      colorWrap.appendChild(grid);
      fields.appendChild(colorWrap);

      const getColorState = renderColorGrid(grid, colorOptions[4].value);

      // tier radio (same as original)
      const tierWrap = document.createElement("div");
      tierWrap.innerHTML = `
        <div class="tinyLabel">Chat Option</div>
        <div class="pillGroup" role="radiogroup" aria-label="Chat option">
          <label class="pill">
            <input type="radio" name="tier_${esc(char.id)}" value="general" checked/>
            <div><b>General text chat</b> <small>(free)</small></div>
          </label>

          <label class="pill">
            <input type="radio" name="tier_${esc(char.id)}" value="uncensored" />
            <div>
              <b>+18 Uncensored text chat</b> <small>($2)</small><br>
              <small style="opacity:.65; font-size:10px; margin:0 4px;"> Lifetime + unlimited + high performance</small>
            </div>
          </label>

          <label class="pill recommend">
            <input type="radio" name="tier_${esc(char.id)}" value="imagechat" />
            <div>
              <b>üî• +18 Uncensored <span style="color:#ff3b3b;">Image</span> Chat (24hrs limit)</b>
              <small class="pillTag">Most Popular</small>
              <small>($6.9)</small>
            </div>
          </label>

          <label class="pill">
            <input type="radio" name="tier_${esc(char.id)}" value="imagechat_unlimited" />
            <div>
              <b>üî• +18 Uncensored <span style="color:#ff3b3b;">Image</span><span style="color:#FFFFFF;"> & Video</span> Chat (Unlimited)</b>
              <small>($25)</small>
              <small style="opacity:.65; font-size:10px; margin:0 4px;">Lifetime</small><br>
              <span style="margin-left:6px; font-size:10px; font-weight:800; color:#ff3b3b;">üéÅ Secret Gift Included</span>
            </div>
          </label>
        </div>
      `;
      fields.appendChild(tierWrap);

      const chatBtn = document.createElement("button");
      chatBtn.className = "chatBtn";
      chatBtn.type = "button";
      chatBtn.textContent = `Chat with ${char.name}`;
      fields.appendChild(chatBtn);

      // ‚úÖ bodyÎ•º cardÏóê Î∂ôÏûÑ (ÏõêÎûò Ïú†ÏßÄ)
      card.appendChild(body);

      // click handler: use the SAME key schema as original
      chatBtn.addEventListener("click", async () => {
        const tier = (card.querySelector(`input[name="tier_${char.id}"]:checked`) || {}).value || "general";
        const { selectedColor, selectedColorName } = getColorState();

        const avatarData = await imgToDataURL(img.src);
        const session = {
          name: char.name,
          nickname: (nick.value || "you").trim() || "you",
          age: String(char.age),
          gender: char.gender,
          language: langSelect.value,

          height: char.height,
          weight: char.weight,

          mbti: char.mbti,
          appearance: char.appearance,
          personality: char.personality,
          scenario: char.scenario,

          fontColor: selectedColor,
          fontColorName: selectedColorName,
          avatarDataUrl: avatarData,

          tier,
          createdAt: Date.now()
        };

        // General: no pay
        if (tier === "general"){
          try{ saveSession(session); }catch(e){ console.error(e); }
          window.location.href = "https://roleplay-chat.com/";
          return;
        }

        // Uncensored: $2 modal (same)
        if (tier === "uncensored"){
          savePending(session);

          const payTitle = document.getElementById("payTitle");
          const payCharName = document.getElementById("payCharName");
          if (payTitle) payTitle.textContent = `Unlock +18 Uncensored ($2)`;
          if (payCharName) payCharName.textContent = session.name;

          openPayModal();
          mountPayPalButtons(() => {
            sessionStorage.setItem(PAYMENT_KEY, "paid");
            session.tier = "uncensored";

            try{ saveSession(session); }catch(e){ console.error(e); }

            clearPending();
            window.location.href = "https://roleplay-chat.com/";
          }, "2.00", "Playing game");

          return;
        }

        // Imagechat: $6.9 modal (same)
        if (tier === "imagechat"){
          savePending(session);

          openImgPayModal();
          mountPayPalButtonsImageChat(() => {
            sessionStorage.setItem(IMAGECHAT_PAID_KEY, "paid");
            session.tier = "imagechat";

            try{ saveSession(session); }catch(e){ console.error(e); }

            clearPending();
            // original flow: go to /imagechat/
            window.location.href = "https://roleplay-chat.com/imagechat/";
          }, "6.90", "playing image game");

          return;
        }

        // Unlimited: $25 modal (same)
        if (tier === "imagechat_unlimited"){
          savePending(session);

          openImgUnlimitedPayModal();
          mountPayPalButtonsImageChatUnlimited(() => {
            sessionStorage.setItem(IMAGECHAT_UNLIMITED_PAID_KEY, "paid");
            session.tier = "imagechat_unlimited";

            try{ saveSession(session); }catch(e){ console.error(e); }

            clearPending();
            window.location.href = "https://roleplay-chat.com/imagechat_unlimited";
          }, "25.00", "Upgrade game");

          return;
        }
      });

      return card;
    }

    // ===== Infinite load: shuffle + loop forever =====
    function shuffle(arr){
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    let base = shuffle(CHARACTERS);
    let cursor = 0;

    function nextChar(){
      if (base.length === 0) base = shuffle(CHARACTERS);
      if (cursor >= base.length){
        base = shuffle(CHARACTERS);
        cursor = 0;
      }
      return base[cursor++];
    }

    const list = $("#list");

    function appendBatch(n=2){
      for (let i=0;i<n;i++){
        const c = nextChar();
        list.appendChild(buildCard(c));
      }
    }

    // ===== Search + Filter =====
    const searchInput = $("#searchInput");
    let genderFilter = "all";

    function getCardText(card){
      return card.innerText.toLowerCase();
    }

    function applySearchFilter(){
      const q = (searchInput.value || "").trim().toLowerCase();

      $$("#list > section.card").forEach(card=>{
        const g = (card.querySelector(".field b") && card.innerText.includes("Gender")) ? card.innerText : card.innerText;
        const txt = getCardText(card);

        // gender match: by checking fixed value in card text (simple + robust)
        const isMan = txt.includes("gender: man");
        const isWoman = txt.includes("gender: woman");

        let passGender = true;
        if (genderFilter === "Man") passGender = isMan;
        if (genderFilter === "Woman") passGender = isWoman;

        const passQuery = !q || txt.includes(q);

        card.style.display = (passGender && passQuery) ? "" : "none";
      });
    }

    searchInput.addEventListener("input", applySearchFilter);
    $$('input[name="genderFilter"]').forEach(r=>{
      r.addEventListener("change", ()=>{
        genderFilter = r.value;
        applySearchFilter();
      });
    });

    // ===== Initial render =====
    appendBatch(3);

    // infinite scroll
    window.addEventListener("scroll", ()=>{
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 800){
        appendBatch(2);
        applySearchFilter();
      }
    });
  </script>
</body>
</html>






